{% extends "base.html" %}

{% block title %}Settings | NT TACACS+{% endblock %}
{% block header %}Settings{% endblock %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
  <div class="flash-container">
    {% for category, message in messages %}
      <div class="flash flash-{{ category }}">{{ message }}</div>
    {% endfor %}
  </div>
  {% endif %}
{% endwith %}

<section class="section">
  <h2 class="section-title">Generate TACACS+ Config (Dry-run)</h2>
  <p>
    ปุ่มนี้จะสร้างไฟล์ config ที่
    <code>/home/trainee25/tacacs-web/tacacs-generated.cfg</code>
    และรันคำสั่ง <code>tac_plus-ng -P</code> เพื่อตรวจ syntax เท่านั้น
    ยังไม่ restart service และยังไม่ส่งผลกับ OLT จริง
  </p>

  <div style="display:flex; gap:0.75rem; flex-wrap:wrap; margin-top:0.75rem;">
    <form method="post" action="{{ url_for('settings.generate_config') }}">
      <button type="submit" class="btn btn-primary">
        Generate &amp; Check
      </button>
    </form>

    <a href="{{ url_for('settings.download_config') }}" class="btn btn-secondary">
      Download config
    </a>
  </div>
</section>

{% endblock %}

